{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import Axios from\"axios\";import React,{useEffect,useState}from\"react\";import domain from\"../util/domain\";import ErrorMessage from\"../components/messages/ErrorMessage\";function Report(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ready=_useState2[0],setReady=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),fname=_useState4[0],setfName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),fcontent=_useState8[0],setfContent=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];useEffect(function(){var getFUD=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var FUDRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"\".concat(domain,\"/user/getFullDetails\"));case 2:FUDRes=_context.sent;try{setfName(FUDRes.data.NickName);setName(FUDRes.data.NickName);}catch(err){console.log(err);}setReady(true);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getFUD(){return _ref.apply(this,arguments);};}();getFUD();},[]);function sendReport(_x){return _sendReport.apply(this,arguments);}function _sendReport(){_sendReport=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var reportDetails,done;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(!fname||fname===\"התחבר לאיתור שם אוטומטי\"||!fcontent)setErrorMessage(\"חסר שם או פירוט\");reportDetails={Name:fname,Content:fcontent};_context2.prev=3;_context2.next=6;return Axios.post(\"\".concat(domain,\"/footer/report\"),reportDetails);case 6:props.suc(\"הבעיה דווחה בהצלחה!\");done=props.whendone;done(false);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);if(_context2.t0.response){if(_context2.t0.response.data.errorMessage){setErrorMessage(_context2.t0.response.data.errorMessage);}}else console.log(_context2.t0);case 14:return _context2.abrupt(\"return\");case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return _sendReport.apply(this,arguments);}function cancel(_x2){return _cancel.apply(this,arguments);}function _cancel(){_cancel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var done;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();done=props.whendone;done(false);return _context3.abrupt(\"return\");case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _cancel.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fudheaderdiv\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"fudheader\",children:\"\\u05D3\\u05D9\\u05D5\\u05D5\\u05D7 \\u05E2\\u05DC \\u05D1\\u05E2\\u05D9\\u05D4:\"})}),/*#__PURE__*/_jsx(\"br\",{}),errorMessage&&/*#__PURE__*/_jsx(ErrorMessage,{message:errorMessage,clear:function clear(){return setErrorMessage(null);}}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"footerlabel\",children:\"\\u05E9\\u05DD \\u05D4\\u05DE\\u05D3\\u05D5\\u05D5\\u05D7: \"}),ready?/*#__PURE__*/_jsxs(\"div\",{className:\"footerinput\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"footerinputshort\",id:\"form-name\",type:\"text\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05DE\\u05D3\\u05D5\\u05D5\\u05D7\",defaultValue:ready?name:\"התחבר למילוי שם אוטומטי\",value:fname,onChange:function onChange(e){return setfName(e.target.value);}}),\" \"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"footerinput\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"footerinputshort\",id:\"form-name\",type:\"text\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05DE\\u05D3\\u05D5\\u05D5\\u05D7\",defaultValue:ready?name:\"התחבר למילוי שם אוטומטי\",value:fname,onChange:function onChange(e){return setfName(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"footerlabel\",children:\"\\u05E4\\u05D9\\u05E8\\u05D5\\u05D8 \\u05D4\\u05D1\\u05E2\\u05D9\\u05D4: \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footerinput\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"footerinputlong\",id:\"form-content\",type:\"text\",placeholder:\"\\u05E4\\u05D9\\u05E8\\u05D5\\u05D8 \\u05D4\\u05D1\\u05E2\\u05D9\\u05D4\",value:fcontent,onChange:function onChange(e){return setfContent(e.target.value);}}),\" \"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"footerbuttonwarapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"footersend\",children:/*#__PURE__*/_jsx(\"button\",{className:\"footersendbutton\",onClick:sendReport,children:\"\\u05E9\\u05DC\\u05D7\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"footercancel\",children:/*#__PURE__*/_jsx(\"button\",{className:\"footercancelbutton\",onClick:cancel,children:\"\\u05D1\\u05D8\\u05DC\"})})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),!ready&&/*#__PURE__*/_jsx(\"h5\",{children:\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05D0\\u05EA \\u05D4\\u05E9\\u05DD \\u05E9\\u05DC\\u05DA \\u05DE\\u05D4\\u05E9\\u05E8\\u05EA... \\u05D5\\u05D5\\u05D3\\u05D0 \\u05E9\\u05D0\\u05EA\\u05D4 \\u05DE\\u05D7\\u05D5\\u05D1\\u05E8 (\\u05DC\\u05D0 \\u05D4\\u05DB\\u05E8\\u05D7\\u05D9 \\u05DC\\u05E9\\u05DC\\u05D9\\u05D7\\u05EA \\u05D4\\u05D3\\u05D9\\u05D5\\u05D5\\u05D7, \\u05E0\\u05D9\\u05EA\\u05DF \\u05DC\\u05D4\\u05D6\\u05D9\\u05DF \\u05E9\\u05DD \\u05D9\\u05D3\\u05E0\\u05D9\\u05EA)\"})]});}export default Report;","map":{"version":3,"sources":["C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/src/footer/Report.js"],"names":["Axios","React","useEffect","useState","domain","ErrorMessage","Report","props","ready","setReady","fname","setfName","name","setName","fcontent","setfContent","errorMessage","setErrorMessage","getFUD","get","FUDRes","data","NickName","err","console","log","sendReport","e","preventDefault","reportDetails","Name","Content","post","suc","done","whendone","response","cancel","target","value"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport React, { useEffect, useState} from \"react\";\r\nimport domain from \"../util/domain\";\r\nimport ErrorMessage from \"../components/messages/ErrorMessage\";\r\n\r\nfunction Report(props) {\r\n    const [ready,setReady] = useState(false);\r\n    \r\n    const [fname, setfName] = useState();\r\n    const [name, setName] = useState();\r\n    const [fcontent, setfContent] = useState();\r\n\r\n    const [ errorMessage, setErrorMessage ] = useState(null);\r\n\r\n    useEffect( () => {\r\n        const getFUD = async () => {\r\n            const FUDRes = await Axios.get(`${domain}/user/getFullDetails`);\r\n            try {setfName(FUDRes.data.NickName);setName(FUDRes.data.NickName);} catch (err){console.log(err);}\r\n            setReady(true);\r\n        }\r\n        getFUD();\r\n    }, []);\r\n\r\n    async function sendReport(e) {\r\n        e.preventDefault();\r\n        \r\n        if((!fname || fname===\"התחבר לאיתור שם אוטומטי\")|| !fcontent)\r\n            setErrorMessage(\"חסר שם או פירוט\");\r\n\r\n        const reportDetails = {\r\n        Name: fname,\r\n        Content: fcontent,\r\n        };\r\n\r\n        try {\r\n        await Axios.post(`${domain}/footer/report`, reportDetails);\r\n        props.suc(\"הבעיה דווחה בהצלחה!\");\r\n        const done=props.whendone;\r\n        done(false);\r\n        } catch (err) {\r\n        if (err.response) {\r\n            if (err.response.data.errorMessage) {\r\n            setErrorMessage(err.response.data.errorMessage);\r\n            }\r\n        }\r\n        else\r\n            console.log(err);\r\n        }\r\n        return;\r\n    }\r\n\r\n    async function cancel(e) {\r\n        e.preventDefault();\r\n        const done=props.whendone;\r\n        done(false);\r\n        return;\r\n    }\r\n\r\n  \r\n\r\n    return  (<>\r\n        <div>\r\n        <div className=\"fudheaderdiv\"><h3 className=\"fudheader\">דיווח על בעיה:</h3></div><br />\r\n        {errorMessage && (\r\n            <ErrorMessage\r\n            message={errorMessage}\r\n            clear={() => setErrorMessage(null)}\r\n            />\r\n        )}\r\n        <form>\r\n            <div className=\"footerlabel\">שם המדווח: </div>\r\n            {ready?<div className=\"footerinput\"><input className=\"footerinputshort\"\r\n                id=\"form-name\"\r\n                type=\"text\"\r\n                placeholder=\"שם המדווח\"\r\n                defaultValue={ready?name:\"התחבר למילוי שם אוטומטי\"}\r\n                value={fname}\r\n                onChange={(e) => setfName(e.target.value)}\r\n            /> </div>:<div className=\"footerinput\"><input className=\"footerinputshort\"\r\n            id=\"form-name\"\r\n            type=\"text\"\r\n            placeholder=\"שם המדווח\"\r\n            defaultValue={ready?name:\"התחבר למילוי שם אוטומטי\"}\r\n            value={fname}\r\n            onChange={(e) => setfName(e.target.value)}\r\n        /> </div>}\r\n            <br/>\r\n            <br/>\r\n            <div className=\"footerlabel\">פירוט הבעיה: </div>\r\n            <div className=\"footerinput\"><textarea className=\"footerinputlong\"\r\n                id=\"form-content\"\r\n                type=\"text\"\r\n                placeholder=\"פירוט הבעיה\"\r\n                value={fcontent}\r\n                onChange={(e) => setfContent(e.target.value)}\r\n            /> </div>\r\n        </form>\r\n        <br/>\r\n        <br/>\r\n        <div className=\"footerbuttonwarapper\">\r\n            <div className=\"footersend\"><button className=\"footersendbutton\" onClick={sendReport}>\r\n                שלח\r\n            </button></div>\r\n            <div className=\"footercancel\"><button className=\"footercancelbutton\" onClick={cancel}>\r\n                בטל\r\n            </button></div>\r\n            </div>\r\n        </div><br/><br/><br/>{!ready && <h5>טוען את השם שלך מהשרת... וודא שאתה מחובר (לא הכרחי לשליחת הדיווח, ניתן להזין שם ידנית)</h5>}\r\n    </>)\r\n    ;\r\n}\r\n\r\nexport default Report;"]},"metadata":{},"sourceType":"module"}