{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import Axios from\"axios\";import React,{useState,useEffect}from\"react\";import domain from\"../../../../util/domain\";import DetailsTable from\"./Edit/DetailsTable\";import ClassesTable from\"./Edit/ClassesTable\";import PersonDetails from\"./Edit/PersonDetails\";import GradesTable from\"./Edit/GradesTable\";import FgradeTable from\"./Edit/FgradeTable\";import PotentialTable from\"./Edit/PotentialTable\";import Paragraph from\"../usefull/Paragraph\";import ErrorMessage from\"../../../messages/ErrorMessage\";function EditOpinion(props){var _useState=useState([4,\"nelson\"]),_useState2=_slicedToArray(_useState,2),newGrade=_useState2[0],setNewGrade=_useState2[1];var OpinionRes=props.allOpinion;var wascrewm=OpinionRes.CrewM;var siginit=OpinionRes.Signed?\"כן\":\"לא\";var wasSigned=siginit;//TKUFA\nvar tkufaNum=OpinionRes.Tkufa;var TkufaYear=tkufaNum%2===0?tkufaNum/2:tkufaNum/2+0.5;var tkufainYear=tkufaNum%2===0?\"2\":\"1\";var yearString=TkufaYear.toString();var countD=0;for(var i=0;i<4-yearString.length;i++){countD++;}var addex=\"\";for(var _i=0;_i<countD;_i++){addex=addex+\"0\";}var finilTkufa=tkufainYear+\".\"+addex+yearString;var wasTkufa=finilTkufa;//FILLDATE\nvar finil=\"DIDNOTDOWANAD\";finil=OpinionRes.fillDate.substring(0,10);var day=finil.substring(5,7);var month=finil.substring(8,10);var year=finil.substring(0,4);finil=day+\"/\"+month+\"/\"+year;var wasFfilldate=finil;var wasMonthsno=OpinionRes.MonthsNo;var wasPosition=OpinionRes.Position;var wasC1=OpinionRes.C1;var wasC2=OpinionRes.C2;var wasC3=OpinionRes.C3;var wasC4=OpinionRes.C4;var wasCommander=OpinionRes.Commander;var wasAuthorizer=OpinionRes.Authorizer;var wasC5=OpinionRes.C5;var wasC6=OpinionRes.C6;var wasC7=OpinionRes.C7;var wasC8=OpinionRes.C8;var wasC9=OpinionRes.C9;var wasM1=OpinionRes.M1;var wasM2=OpinionRes.M2;//PARAGRAPHS\nvar tparr=OpinionRes.Tp;var fparr=OpinionRes.Fp;var tpp=\"\";var fpp=\"\";for(var _i2=0;_i2<tparr.length;_i2++){tpp=tpp+tparr[_i2]+\"\\n\";}for(var _i3=0;_i3<fparr.length;_i3++){fpp=fpp+fparr[_i3]+\"\\n\";}var wasTp=tpp;var wasFp=fpp;var _useState3=useState(wasC1),_useState4=_slicedToArray(_useState3,2),nc1=_useState4[0],setNc1=_useState4[1];var _useState5=useState(wasC2),_useState6=_slicedToArray(_useState5,2),nc2=_useState6[0],setNc2=_useState6[1];var _useState7=useState(wasC3),_useState8=_slicedToArray(_useState7,2),nc3=_useState8[0],setNc3=_useState8[1];var _useState9=useState(wasC4),_useState10=_slicedToArray(_useState9,2),nc4=_useState10[0],setNc4=_useState10[1];var _useState11=useState(wasC5),_useState12=_slicedToArray(_useState11,2),nc5=_useState12[0],setNc5=_useState12[1];var _useState13=useState(wasC6),_useState14=_slicedToArray(_useState13,2),nc6=_useState14[0],setNc6=_useState14[1];var _useState15=useState(wasC7),_useState16=_slicedToArray(_useState15,2),nc7=_useState16[0],setNc7=_useState16[1];var _useState17=useState(wasC8),_useState18=_slicedToArray(_useState17,2),nc8=_useState18[0],setNc8=_useState18[1];var _useState19=useState(wasC9),_useState20=_slicedToArray(_useState19,2),nc9=_useState20[0],setNc9=_useState20[1];var _useState21=useState(wasM1),_useState22=_slicedToArray(_useState21,2),nf=_useState22[0],setNf=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),errorMessage=_useState24[0],setErrorMessage=_useState24[1];useEffect(function(){switch(newGrade[1]){case\"fi\":setNf(newGrade[0]);break;case\"C1\":setNc1(newGrade[0]);break;case\"C2\":setNc2(newGrade[0]);break;case\"C3\":setNc3(newGrade[0]);break;case\"C4\":setNc4(newGrade[0]);break;case\"C5\":setNc5(newGrade[0]);break;case\"C6\":setNc6(newGrade[0]);break;case\"C7\":setNc7(newGrade[0]);break;case\"C8\":setNc8(newGrade[0]);break;case\"C9\":setNc9(newGrade[0]);break;default:console.log(\"אתחול או שינוי לא מוכר\");break;}},[newGrade]);function send(){return _send.apply(this,arguments);}function _send(){_send=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newData,closeModal;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newData={o1:nc1,o2:nc2,o3:nc3,o4:nc4,o5:nc5,o6:nc6,o7:nc7,o8:nc8,o9:nc9,fn:nf};_context.prev=1;_context.next=4;return Axios.put(\"\".concat(domain,\"/opinion/editOpinion/\").concat(OpinionRes._id),newData);case 4:props.suc('חוו\"ד '+finilTkufa+\" עדוכן בהצלחה!\");closeModal=props.forClosing;closeModal();_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);if(_context.t0.response){if(_context.t0.response.data.errorMessage){setErrorMessage(_context.t0.response.data.errorMessage);}}else console.log(_context.t0);case 12:return _context.abrupt(\"return\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _send.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"odiv\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h3\",{className:\"oh3\",children:[\"\\u05D8\\u05D5\\u05E4\\u05E1 \\u05DE\\u05D9\\u05E9\\u05D5\\u05D1 \\u05D5\\u05D4\\u05E2\\u05E8\\u05DB\\u05D4 \\u05DC\\u05E8\\u05DE\\u05EA \\u05D4\\u05D1\\u05E7\\u05E8\\u05D4 \\u05E9\\u05DC \",wascrewm&&wascrewm.NickName,\" - \\u05EA\\u05E7\\u05D5\\u05E4\\u05D4\",\" \",wasTkufa,\":\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"oh4\",children:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05D4\\u05E7\\u05E6\\u05D9\\u05DF \\u05D4\\u05DE\\u05D5\\u05E2\\u05E8\\u05DA\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(DetailsTable,{crewm:wascrewm,signed:wasSigned,tkufa:wasTkufa,filldate:wasFfilldate,monthsno:wasMonthsno,position:wasPosition}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(ClassesTable,{maslool:wascrewm&&wascrewm.Maslool,sooghatsava:wascrewm&&wascrewm.SoogHatsava,dereg:wascrewm&&wascrewm.Dereg}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"oh4\",children:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05D4\\u05DE\\u05E2\\u05E8\\u05D9\\u05DA - \\u05DE\\u05E4\\u05E7\\u05D3 \\u05D2\\u05E3\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(PersonDetails,{ma:wasCommander&&wasCommander.MA,darga:wasCommander&&wasCommander.Rank,firstn:wasCommander&&wasCommander.FirstName,lastn:wasCommander&&wasCommander.LastName}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"oh4\",children:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05D4\\u05DE\\u05D0\\u05E9\\u05E8 - \\u05DE\\u05E4\\u05E7\\u05D3 \\u05D9\\u05D7\\u05D9\\u05D3\\u05D4\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{className:\"oh5\",children:\"(\\u05D5\\u05DE\\u05E2\\u05E8\\u05D9\\u05DA \\u05D1\\u05EA\\u05E0\\u05D0\\u05D9 \\u05E9\\u05D4\\u05D1\\u05E7\\u05E8 \\u05DE\\u05D5\\u05E1\\u05DE\\u05DA...)\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(PersonDetails,{ma:wasAuthorizer&&wasAuthorizer.MA,darga:wasAuthorizer&&wasAuthorizer.Rank,firstn:wasAuthorizer&&wasAuthorizer.FirstName,lastn:wasAuthorizer&&wasAuthorizer.LastName}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"oh4\",children:\"\\u05D4\\u05E2\\u05E8\\u05DB\\u05EA \\u05EA\\u05DB\\u05D5\\u05E0\\u05D5\\u05EA \\u05D1\\u05E7\\u05E8\\u05D4:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(GradesTable,{c1:nc1,c2:nc2,c3:nc3,c4:nc4,c5:nc5,c6:nc6,c7:nc7,c8:nc8,c9:nc9,allDATA:props.allDATA,setnewgrade:setNewGrade}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"oh4\",children:\"\\u05E6\\u05D9\\u05D5\\u05DF \\u05DE\\u05E1\\u05DB\\u05DD:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(FgradeTable,{setnewgrade:setNewGrade,grade:nf,allDATA:props.allDATA}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"oh4\",children:\"\\u05E4\\u05D5\\u05D8\\u05E0\\u05E6\\u05D9\\u05D0\\u05DC \\u05DC\\u05D4\\u05D5\\u05D1\\u05DC\\u05D4:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(PotentialTable,{grade:wasM2}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"oh4\",children:\"\\u05D4\\u05E2\\u05E8\\u05DB\\u05D4 \\u05DE\\u05D9\\u05DC\\u05D5\\u05DC\\u05D9\\u05EA \\u05DE\\u05E1\\u05DB\\u05DE\\u05EA:\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{className:\"oh5\",children:\"\\u05D9\\u05E2\\u05D3\\u05D9\\u05DD \\u05DC\\u05EA\\u05E7\\u05D5\\u05E4\\u05D4 \\u05D4\\u05E7\\u05E8\\u05D5\\u05D1\\u05D4:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"opd\",children:/*#__PURE__*/_jsx(Paragraph,{text:wasTp})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{className:\"oh5\",children:\"\\u05E1\\u05D9\\u05DB\\u05D5\\u05DD \\u05D4\\u05DE\\u05E9\\u05D5\\u05D1:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"opd\",children:/*#__PURE__*/_jsx(Paragraph,{text:wasFp})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"OpinionSend\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"OpinionSendButton\",onClick:send,children:[\"\\u05E9\\u05DC\\u05D7 \",wasTkufa]}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),errorMessage&&/*#__PURE__*/_jsx(ErrorMessage,{message:errorMessage,clear:function clear(){return setErrorMessage(null);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"OpinionClose\",children:/*#__PURE__*/_jsx(\"button\",{className:\"OpinionCloseButton\",onClick:props.forClosing,children:\"\\u05E1\\u05D2\\u05D5\\u05E8 \\u05DE\\u05D1\\u05DC\\u05D9 \\u05DC\\u05E9\\u05DE\\u05D5\\u05E8\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});}export default EditOpinion;","map":{"version":3,"sources":["C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/src/components/page/global/Opinions/EditOpinion.js"],"names":["Axios","React","useState","useEffect","domain","DetailsTable","ClassesTable","PersonDetails","GradesTable","FgradeTable","PotentialTable","Paragraph","ErrorMessage","EditOpinion","props","newGrade","setNewGrade","OpinionRes","allOpinion","wascrewm","CrewM","siginit","Signed","wasSigned","tkufaNum","Tkufa","TkufaYear","tkufainYear","yearString","toString","countD","i","length","addex","finilTkufa","wasTkufa","finil","fillDate","substring","day","month","year","wasFfilldate","wasMonthsno","MonthsNo","wasPosition","Position","wasC1","C1","wasC2","C2","wasC3","C3","wasC4","C4","wasCommander","Commander","wasAuthorizer","Authorizer","wasC5","C5","wasC6","C6","wasC7","C7","wasC8","C8","wasC9","C9","wasM1","M1","wasM2","M2","tparr","Tp","fparr","Fp","tpp","fpp","wasTp","wasFp","nc1","setNc1","nc2","setNc2","nc3","setNc3","nc4","setNc4","nc5","setNc5","nc6","setNc6","nc7","setNc7","nc8","setNc8","nc9","setNc9","nf","setNf","errorMessage","setErrorMessage","console","log","send","newData","o1","o2","o3","o4","o5","o6","o7","o8","o9","fn","put","_id","suc","closeModal","forClosing","response","data","NickName","Maslool","SoogHatsava","Dereg","MA","Rank","FirstName","LastName","allDATA"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport domain from \"../../../../util/domain\";\r\nimport DetailsTable from \"./Edit/DetailsTable\";\r\nimport ClassesTable from \"./Edit/ClassesTable\";\r\nimport PersonDetails from \"./Edit/PersonDetails\";\r\nimport GradesTable from \"./Edit/GradesTable\";\r\nimport FgradeTable from \"./Edit/FgradeTable\";\r\nimport PotentialTable from \"./Edit/PotentialTable\";\r\nimport Paragraph from \"../usefull/Paragraph\";\r\nimport ErrorMessage from \"../../../messages/ErrorMessage\";\r\n\r\nfunction EditOpinion(props) {\r\n  const [newGrade, setNewGrade] = useState([4, \"nelson\"]);\r\n\r\n  const OpinionRes = props.allOpinion;\r\n  let wascrewm = OpinionRes.CrewM;\r\n\r\n  let siginit = OpinionRes.Signed ? \"כן\" : \"לא\";\r\n  let wasSigned = siginit;\r\n\r\n  //TKUFA\r\n  let tkufaNum = OpinionRes.Tkufa;\r\n  let TkufaYear = tkufaNum % 2 === 0 ? tkufaNum / 2 : tkufaNum / 2 + 0.5;\r\n  let tkufainYear = tkufaNum % 2 === 0 ? \"2\" : \"1\";\r\n  let yearString = TkufaYear.toString();\r\n  let countD = 0;\r\n  for (let i = 0; i < 4 - yearString.length; i++) countD++;\r\n  let addex = \"\";\r\n  for (let i = 0; i < countD; i++) addex = addex + \"0\";\r\n  let finilTkufa = tkufainYear + \".\" + addex + yearString;\r\n  let wasTkufa = finilTkufa;\r\n\r\n  //FILLDATE\r\n  let finil = \"DIDNOTDOWANAD\";\r\n  finil = OpinionRes.fillDate.substring(0, 10);\r\n  const day = finil.substring(5, 7);\r\n  const month = finil.substring(8, 10);\r\n  const year = finil.substring(0, 4);\r\n  finil = day + \"/\" + month + \"/\" + year;\r\n  let wasFfilldate = finil;\r\n\r\n  let wasMonthsno = OpinionRes.MonthsNo;\r\n\r\n  let wasPosition = OpinionRes.Position;\r\n\r\n  let wasC1 = OpinionRes.C1;\r\n\r\n  let wasC2 = OpinionRes.C2;\r\n\r\n  let wasC3 = OpinionRes.C3;\r\n\r\n  let wasC4 = OpinionRes.C4;\r\n\r\n  let wasCommander = OpinionRes.Commander;\r\n\r\n  let wasAuthorizer = OpinionRes.Authorizer;\r\n\r\n  let wasC5 = OpinionRes.C5;\r\n\r\n  let wasC6 = OpinionRes.C6;\r\n\r\n  let wasC7 = OpinionRes.C7;\r\n\r\n  let wasC8 = OpinionRes.C8;\r\n\r\n  let wasC9 = OpinionRes.C9;\r\n\r\n  let wasM1 = OpinionRes.M1;\r\n\r\n  let wasM2 = OpinionRes.M2;\r\n\r\n  //PARAGRAPHS\r\n  let tparr = OpinionRes.Tp;\r\n  let fparr = OpinionRes.Fp;\r\n  let tpp = \"\";\r\n  let fpp = \"\";\r\n  for (let i = 0; i < tparr.length; i++) tpp = tpp + tparr[i] + \"\\n\";\r\n\r\n  for (let i = 0; i < fparr.length; i++) fpp = fpp + fparr[i] + \"\\n\";\r\n\r\n  let wasTp = tpp;\r\n  let wasFp = fpp;\r\n\r\n  const [nc1, setNc1] = useState(wasC1);\r\n  const [nc2, setNc2] = useState(wasC2);\r\n  const [nc3, setNc3] = useState(wasC3);\r\n  const [nc4, setNc4] = useState(wasC4);\r\n  const [nc5, setNc5] = useState(wasC5);\r\n  const [nc6, setNc6] = useState(wasC6);\r\n  const [nc7, setNc7] = useState(wasC7);\r\n  const [nc8, setNc8] = useState(wasC8);\r\n  const [nc9, setNc9] = useState(wasC9);\r\n  const [nf, setNf] = useState(wasM1);\r\n\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    switch (newGrade[1]) {\r\n      case \"fi\":\r\n        setNf(newGrade[0]);\r\n        break;\r\n\r\n      case \"C1\":\r\n        setNc1(newGrade[0]);\r\n        break;\r\n\r\n      case \"C2\":\r\n        setNc2(newGrade[0]);\r\n        break;\r\n\r\n      case \"C3\":\r\n        setNc3(newGrade[0]);\r\n        break;\r\n\r\n      case \"C4\":\r\n        setNc4(newGrade[0]);\r\n        break;\r\n\r\n      case \"C5\":\r\n        setNc5(newGrade[0]);\r\n        break;\r\n\r\n      case \"C6\":\r\n        setNc6(newGrade[0]);\r\n        break;\r\n\r\n      case \"C7\":\r\n        setNc7(newGrade[0]);\r\n        break;\r\n\r\n      case \"C8\":\r\n        setNc8(newGrade[0]);\r\n        break;\r\n\r\n      case \"C9\":\r\n        setNc9(newGrade[0]);\r\n        break;\r\n\r\n      default:\r\n        console.log(\"אתחול או שינוי לא מוכר\");\r\n        break;\r\n    }\r\n  }, [newGrade]);\r\n\r\n  async function send() {\r\n    const newData = {\r\n      o1: nc1,\r\n      o2: nc2,\r\n      o3: nc3,\r\n      o4: nc4,\r\n      o5: nc5,\r\n      o6: nc6,\r\n      o7: nc7,\r\n      o8: nc8,\r\n      o9: nc9,\r\n      fn: nf,\r\n    };\r\n\r\n    try {\r\n      await Axios.put(\r\n        `${domain}/opinion/editOpinion/${OpinionRes._id}`,\r\n        newData\r\n      );\r\n      props.suc('חוו\"ד ' + finilTkufa + \" עדוכן בהצלחה!\");\r\n      const closeModal = props.forClosing;\r\n      closeModal();\r\n    } catch (err) {\r\n      if (err.response) {\r\n        if (err.response.data.errorMessage) {\r\n          setErrorMessage(err.response.data.errorMessage);\r\n        }\r\n      } else console.log(err);\r\n    }\r\n    return;\r\n  }\r\n\r\n  return (\r\n    <div className=\"odiv\">\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <h3 className=\"oh3\">\r\n        טופס מישוב והערכה לרמת הבקרה של {wascrewm && wascrewm.NickName} - תקופה{\" \"}\r\n        {wasTkufa}:\r\n      </h3>\r\n      <br />\r\n      <br /> <br />\r\n      <h4 className=\"oh4\">פרטי הקצין המוערך</h4>\r\n      <br />\r\n      <DetailsTable\r\n        crewm={wascrewm}\r\n        signed={wasSigned}\r\n        tkufa={wasTkufa}\r\n        filldate={wasFfilldate}\r\n        monthsno={wasMonthsno}\r\n        position={wasPosition}\r\n      />\r\n      <br />\r\n      <ClassesTable\r\n        maslool={wascrewm && wascrewm.Maslool}\r\n        sooghatsava={wascrewm && wascrewm.SoogHatsava}\r\n        dereg={wascrewm && wascrewm.Dereg}\r\n      />\r\n      <br />\r\n      <br /> <br />\r\n      <h4 className=\"oh4\">פרטי המעריך - מפקד גף</h4>\r\n      <br />\r\n      <PersonDetails\r\n        ma={wasCommander && wasCommander.MA}\r\n        darga={wasCommander && wasCommander.Rank}\r\n        firstn={wasCommander && wasCommander.FirstName}\r\n        lastn={wasCommander && wasCommander.LastName}\r\n      />\r\n      <br />\r\n      <br /> <br /> <br />\r\n      <h4 className=\"oh4\">פרטי המאשר - מפקד יחידה</h4>\r\n      <br />\r\n      <h5 className=\"oh5\">(ומעריך בתנאי שהבקר מוסמך...)</h5>\r\n      <br />\r\n      <PersonDetails\r\n        ma={wasAuthorizer && wasAuthorizer.MA}\r\n        darga={wasAuthorizer && wasAuthorizer.Rank}\r\n        firstn={wasAuthorizer && wasAuthorizer.FirstName}\r\n        lastn={wasAuthorizer && wasAuthorizer.LastName}\r\n      />\r\n      <br />\r\n      <br /> <br />\r\n      <h4 className=\"oh4\">הערכת תכונות בקרה:</h4>\r\n      <br />\r\n      <GradesTable\r\n        c1={nc1}\r\n        c2={nc2}\r\n        c3={nc3}\r\n        c4={nc4}\r\n        c5={nc5}\r\n        c6={nc6}\r\n        c7={nc7}\r\n        c8={nc8}\r\n        c9={nc9}\r\n        allDATA={props.allDATA}\r\n        setnewgrade={setNewGrade}\r\n      />\r\n      <br /> <br />\r\n      <br />\r\n      <h4 className=\"oh4\">ציון מסכם:</h4>\r\n      <br />\r\n      <FgradeTable\r\n        setnewgrade={setNewGrade}\r\n        grade={nf}\r\n        allDATA={props.allDATA}\r\n      />\r\n      <br />\r\n      <br /> <br />\r\n      <h4 className=\"oh4\">פוטנציאל להובלה:</h4>\r\n      <br />\r\n      <PotentialTable grade={wasM2} />\r\n      <br />\r\n      <br /> <br />\r\n      <h4 className=\"oh4\">הערכה מילולית מסכמת:</h4> <br />\r\n      <h5 className=\"oh5\">יעדים לתקופה הקרובה:</h5>\r\n      <br />\r\n      <div className=\"opd\">\r\n        <Paragraph text={wasTp} />\r\n      </div>\r\n      <br />\r\n      <h5 className=\"oh5\">סיכום המשוב:</h5>\r\n      <br />\r\n      <div className=\"opd\">\r\n        <Paragraph text={wasFp} />\r\n      </div>\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <div className=\"OpinionSend\">\r\n        <button className=\"OpinionSendButton\" onClick={send}>\r\n          שלח {wasTkufa}\r\n        </button>\r\n        <br /> <br />\r\n        {errorMessage && (\r\n          <ErrorMessage\r\n            message={errorMessage}\r\n            clear={() => setErrorMessage(null)}\r\n          />\r\n        )}\r\n      </div>\r\n      <br />\r\n      <div className=\"OpinionClose\">\r\n        <button className=\"OpinionCloseButton\" onClick={props.forClosing}>\r\n          סגור מבלי לשמור\r\n        </button>\r\n      </div>\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <br />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditOpinion;\r\n"]},"metadata":{},"sourceType":"module"}