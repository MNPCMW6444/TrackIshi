{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import Axios from\"axios\";import React,{useEffect,useState}from\"react\";import domain from\"../util/domain\";import ErrorMessage from\"../components/messages/ErrorMessage\";function Suggest(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ready=_useState2[0],setReady=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),fname=_useState4[0],setfName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),fcontent=_useState8[0],setfContent=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];useEffect(function(){var getFUD=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var FUDRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"\".concat(domain,\"/user/getFullDetails\"));case 2:FUDRes=_context.sent;try{setfName(FUDRes.data.NickName);setName(FUDRes.data.NickName);}catch(err){console.log(err);}setReady(true);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getFUD(){return _ref.apply(this,arguments);};}();getFUD();},[]);function sendSuggest(_x){return _sendSuggest.apply(this,arguments);}function _sendSuggest(){_sendSuggest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var suggestDetails,done;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(!fname||fname===\"התחבר לאיתור שם אוטומטי\"||!fcontent)setErrorMessage(\"חסר שם או פירוט\");suggestDetails={Name:fname,Content:fcontent};_context2.prev=3;_context2.next=6;return Axios.post(\"\".concat(domain,\"/footer/suggest\"),suggestDetails);case 6:props.suc(\"ההצעה נשלחה בהצלחה!\");done=props.whendone;done(false);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);if(_context2.t0.response){if(_context2.t0.response.data.errorMessage){setErrorMessage(_context2.t0.response.data.errorMessage);}}else console.log(_context2.t0);case 14:return _context2.abrupt(\"return\");case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return _sendSuggest.apply(this,arguments);}function cancel(_x2){return _cancel.apply(this,arguments);}function _cancel(){_cancel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var done;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();done=props.whendone;done(false);return _context3.abrupt(\"return\");case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _cancel.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fudheaderdiv\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"fudheader\",children:\"\\u05D4\\u05E6\\u05E2 \\u05E9\\u05D9\\u05E4\\u05D5\\u05E8:\"})}),/*#__PURE__*/_jsx(\"br\",{}),errorMessage&&/*#__PURE__*/_jsx(ErrorMessage,{message:errorMessage,clear:function clear(){return setErrorMessage(null);}}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"footerlabel\",children:\"\\u05E9\\u05DD \\u05D4\\u05DE\\u05E6\\u05D9\\u05E2: \"}),ready?/*#__PURE__*/_jsxs(\"div\",{className:\"footerinput\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"footerinputshort\",id:\"form-name\",type:\"text\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05DE\\u05E6\\u05D9\\u05E2\",defaultValue:ready?name:\"התחבר למילוי שם אוטומטי\",value:fname,onChange:function onChange(e){return setfName(e.target.value);}}),\" \"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"footerinput\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"footerinputshort\",id:\"form-name\",type:\"text\",placeholder:\"\\u05E9\\u05DD \\u05D4\\u05DE\\u05E6\\u05D9\\u05E2\",defaultValue:ready?name:\"התחבר למילוי שם אוטומטי\",value:fname,onChange:function onChange(e){return setfName(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"footerlabel\",children:\"\\u05E4\\u05D9\\u05E8\\u05D5\\u05D8 \\u05D4\\u05D4\\u05E6\\u05E2\\u05D4: \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footerinput\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"footerinputlong\",id:\"form-content\",type:\"text\",placeholder:\"\\u05E4\\u05D9\\u05E8\\u05D5\\u05D8 \\u05D4\\u05D4\\u05E6\\u05E2\\u05D4\",value:fcontent,onChange:function onChange(e){return setfContent(e.target.value);}}),\" \"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"footerbuttonwarapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"footersend\",children:/*#__PURE__*/_jsx(\"button\",{className:\"footersendbutton\",onClick:sendSuggest,children:\"\\u05E9\\u05DC\\u05D7\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"footercancel\",children:/*#__PURE__*/_jsx(\"button\",{className:\"footercancelbutton\",onClick:cancel,children:\"\\u05D1\\u05D8\\u05DC\"})})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),!ready&&/*#__PURE__*/_jsx(\"h5\",{children:\"\\u05D8\\u05D5\\u05E2\\u05DF \\u05D0\\u05EA \\u05D4\\u05E9\\u05DD \\u05E9\\u05DC\\u05DA \\u05DE\\u05D4\\u05E9\\u05E8\\u05EA... (\\u05D0\\u05DD \\u05D0\\u05EA\\u05D4 \\u05DE\\u05E1\\u05E4\\u05D9\\u05E7 \\u05DC\\u05E7\\u05E8\\u05D5\\u05D0 \\u05D0\\u05EA \\u05D4\\u05D4\\u05D5\\u05D3\\u05E2\\u05D4 \\u05D4\\u05D6\\u05D0\\u05EA \\u05D0\\u05D6 \\u05D9\\u05D9\\u05EA\\u05DB\\u05DF \\u05E9\\u05D9\\u05E9 \\u05EA\\u05E7\\u05DC\\u05D4 \\u05D1\\u05E9\\u05E8\\u05EA \\u05D0\\u05D5 \\u05D1\\u05EA\\u05E7\\u05E9\\u05D5\\u05E8\\u05EA \\u05D0\\u05D9\\u05EA\\u05D5), \\u05D1\\u05E2\\u05E7\\u05E8\\u05D5\\u05DF \\u05D0\\u05E2\\u05D9\\u05E0\\u05EA \\u05D4\\u05E9\\u05DD \\u05D0\\u05D9\\u05E0\\u05D4 \\u05D4\\u05DB\\u05E8\\u05D7\\u05D9\\u05EA \\u05DC\\u05E9\\u05DC\\u05D9\\u05D7\\u05EA \\u05D4\\u05D3\\u05D9\\u05D5\\u05D5\\u05D7, \\u05E0\\u05D9\\u05EA\\u05DF \\u05DC\\u05D4\\u05D6\\u05D9\\u05DF \\u05E9\\u05DD \\u05D9\\u05D3\\u05E0\\u05D9\\u05EA)\"})]});}export default Suggest;","map":{"version":3,"sources":["C:/Users/mnpcm/Documents/GitHub/TrackIshi/client/src/footer/Suggest.js"],"names":["Axios","React","useEffect","useState","domain","ErrorMessage","Suggest","props","ready","setReady","fname","setfName","name","setName","fcontent","setfContent","errorMessage","setErrorMessage","getFUD","get","FUDRes","data","NickName","err","console","log","sendSuggest","e","preventDefault","suggestDetails","Name","Content","post","suc","done","whendone","response","cancel","target","value"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport domain from \"../util/domain\";\nimport ErrorMessage from \"../components/messages/ErrorMessage\";\n\nfunction Suggest(props) {\n  const [ready, setReady] = useState(false);\n\n  const [fname, setfName] = useState();\n  const [name, setName] = useState();\n  const [fcontent, setfContent] = useState();\n\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    const getFUD = async () => {\n      const FUDRes = await Axios.get(`${domain}/user/getFullDetails`);\n      try {\n        setfName(FUDRes.data.NickName);\n        setName(FUDRes.data.NickName);\n      } catch (err) {\n        console.log(err);\n      }\n      setReady(true);\n    };\n    getFUD();\n  }, []);\n\n  async function sendSuggest(e) {\n    e.preventDefault();\n\n    if (!fname || fname === \"התחבר לאיתור שם אוטומטי\" || !fcontent)\n      setErrorMessage(\"חסר שם או פירוט\");\n\n    const suggestDetails = {\n      Name: fname,\n      Content: fcontent,\n    };\n\n    try {\n      await Axios.post(`${domain}/footer/suggest`, suggestDetails);\n      props.suc(\"ההצעה נשלחה בהצלחה!\");\n      const done = props.whendone;\n      done(false);\n    } catch (err) {\n      if (err.response) {\n        if (err.response.data.errorMessage) {\n          setErrorMessage(err.response.data.errorMessage);\n        }\n      } else console.log(err);\n    }\n    return;\n  }\n\n  async function cancel(e) {\n    e.preventDefault();\n    const done = props.whendone;\n    done(false);\n    return;\n  }\n\n  return (\n    <>\n      <div>\n        <div className=\"fudheaderdiv\">\n          <h3 className=\"fudheader\">הצע שיפור:</h3>\n        </div>\n        <br />\n        {errorMessage && (\n          <ErrorMessage\n            message={errorMessage}\n            clear={() => setErrorMessage(null)}\n          />\n        )}\n        <form>\n          <div className=\"footerlabel\">שם המציע: </div>\n          {ready ? (\n            <div className=\"footerinput\">\n              <input\n                className=\"footerinputshort\"\n                id=\"form-name\"\n                type=\"text\"\n                placeholder=\"שם המציע\"\n                defaultValue={ready ? name : \"התחבר למילוי שם אוטומטי\"}\n                value={fname}\n                onChange={(e) => setfName(e.target.value)}\n              />{\" \"}\n            </div>\n          ) : (\n            <div className=\"footerinput\">\n              <input\n                className=\"footerinputshort\"\n                id=\"form-name\"\n                type=\"text\"\n                placeholder=\"שם המציע\"\n                defaultValue={ready ? name : \"התחבר למילוי שם אוטומטי\"}\n                value={fname}\n                onChange={(e) => setfName(e.target.value)}\n              />{\" \"}\n            </div>\n          )}\n          <br />\n          <br />\n          <div className=\"footerlabel\">פירוט ההצעה: </div>\n          <div className=\"footerinput\">\n            <textarea\n              className=\"footerinputlong\"\n              id=\"form-content\"\n              type=\"text\"\n              placeholder=\"פירוט ההצעה\"\n              value={fcontent}\n              onChange={(e) => setfContent(e.target.value)}\n            />{\" \"}\n          </div>\n        </form>\n        <br />\n        <br />\n        <div className=\"footerbuttonwarapper\">\n          <div className=\"footersend\">\n            <button className=\"footersendbutton\" onClick={sendSuggest}>\n              שלח\n            </button>\n          </div>\n          <div className=\"footercancel\">\n            <button className=\"footercancelbutton\" onClick={cancel}>\n              בטל\n            </button>\n          </div>\n        </div>\n      </div>\n      <br />\n      <br />\n      <br />\n      {!ready && (\n        <h5>\n          טוען את השם שלך מהשרת... (אם אתה מספיק לקרוא את ההודעה הזאת אז ייתכן\n          שיש תקלה בשרת או בתקשורת איתו), בעקרון אעינת השם אינה הכרחית לשליחת\n          הדיווח, ניתן להזין שם ידנית)\n        </h5>\n      )}\n    </>\n  );\n}\n\nexport default Suggest;\n"]},"metadata":{},"sourceType":"module"}